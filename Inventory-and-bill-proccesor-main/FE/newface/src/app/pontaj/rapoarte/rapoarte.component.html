<div class="wrap">
  <!-- Header bar (la fel ca în pontaj) -->
  <div class="bar">
    <div class="date">
      <span class="weekday">Rapoarte</span>
    </div>

    <div class="actions">
      <button class="btn ghost" (click)="backToPontaj()">Înapoi la pontaj</button>
    </div>
  </div>

  <!-- Conținut rapoarte -->
  <div class="sections">
    <!-- Raport pe zi -->
    <section class="section-card">
      <h2>Raport pe zi</h2>
      <p class="section-sub">
        Alege o dată și descarcă raportul zilnic (toți angajații).
      </p>

      <div class="field-row">
        <label>Data</label>
        <input type="date" [(ngModel)]="dayDate" [max]="todayISO()" />
      </div>

      <button class="btn primary" (click)="downloadDayReport()">
        Descarcă raport pe zi
      </button>

      <div class="hint" *ngIf="dayError">{{ dayError }}</div>
    </section>

    <!-- Raport pe firmă + lună -->
    <section class="section-card">
      <h2>Raport pe firmă</h2>
      <p class="section-sub">
        Alege firma, apoi luna pentru care vrei fișierul de pontaj (.xlsx).
      </p>

      <div class="field-row">
        <label>Firma</label>
        <select [(ngModel)]="selectedCompany">
          <option [ngValue]="null" disabled>— alege firma —</option>
          <option *ngFor="let c of companies" [ngValue]="c">{{ c }}</option>
        </select>
      </div>

      <div class="field-row">
        <label>Luna</label>
        <input type="month" [(ngModel)]="monthValue" />
      </div>


      <button class="btn primary" [disabled]="!selectedCompany || !monthValue" (click)="downloadCompanyMonthReport()">
        Descarcă raport firmă
      </button>

      <div class="hint" *ngIf="companyError">{{ companyError }}</div>
    </section>
  </div>


<br>
<br>

  <!-- Costuri salariale pe firmă -->
  <div class="section">


    <div class="section-body salary-card">
          <div class="section-header">
      <h2>Costuri salariale pe firmă (lunar)</h2>
      <p>Calculează totalul salariilor pe lună pentru fiecare firmă.</p>
    </div>
      <div class="salary-filters">
        <div class="field">
          <label>An</label>
          <select [(ngModel)]="salaryYear">
            <option *ngFor="let y of years" [ngValue]="y">{{ y }}</option>
          </select>
        </div>

        <div class="field">
          <label>Luna</label>
          <select [(ngModel)]="salaryMonth">
            <option *ngFor="let m of months" [ngValue]="m.value">{{ m.label }}</option>
          </select>
        </div>

        <div class="field">
          <label>Firma</label>
          <select [(ngModel)]="salaryCompany">
            <option *ngFor="let c of companies" [ngValue]="c">{{ c }}</option>
          </select>
        </div>

        <button class="btn" (click)="loadSalaryCost()"
          [disabled]="loadingSalary || !salaryYear || !salaryMonth || !salaryCompany">
          Calculează
        </button>
      </div>

      <div class="state" *ngIf="loadingSalary">Se calculează…</div>

      <div class="salary-result" *ngIf="salaryResult && !loadingSalary">
        <div class="salary-company">
          {{ salaryResult.company }} – {{ salaryResult.month }}
        </div>
        <div class="salary-amount">
          {{ salaryResult.total | number:'1.2-2' }} lei
        </div>
      </div>

      <div class="state error" *ngIf="salaryError">{{ salaryError }}</div>
    </div>


  </div>

</div>